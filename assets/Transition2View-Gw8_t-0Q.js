import{d as M,c as t,r as e,o as R,a as N,b as d,k as f,i as a,j as o,f as i,n as W,g as G,h as H}from"./index-DK4RB-FT.js";import{a as J,s as K,t as Q,b as T}from"./過場煙霧-CCM1rfwx.js";import{w as X}from"./warning_footer-D9FTkEpB.js";import{q as Y}from"./question_background1-CIrWtZw_.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee=["src"],te={key:1,class:"relative mb-6 w-full max-w-md"},ae=["src"],oe=["src"],se=["src"],ne=["src"],le=M({__name:"Transition2View",setup(ue){const p=G(),w=H(),k=T,g=T,c=t(()=>w.query.video!=="false"),s=e(null),y=e(!1),_=e({x:50,y:50}),S=e(100),I=e("screen"),E=e(.5),b=e({x:50,y:30}),P=e(80);e(!0),e(!0);const x=e(!1),v=e(!1),m=e(!1),h=e(!1);e(!1);const $=e(!1),n=e(null),l=e(null),z=t(()=>({backgroundImage:`url(${g})`,backgroundSize:"contain",backgroundPosition:"center"})),O=t(()=>({})),B=t(()=>({left:`${_.value.x}%`,top:`${_.value.y}%`,width:`${S.value}%`,transform:"translate(-50%, -50%)",mixBlendMode:I.value,opacity:E.value})),U=t(()=>({left:`${b.value.x}%`,top:`${b.value.y}%`,width:`${P.value}%`,transform:v.value?"translate(-50%, -50%)":"translate(-50%, calc(-50% - 20px))",opacity:v.value?1:0,filter:v.value?"blur(0px)":"blur(8px)",transition:"opacity 1.5s ease-out, filter 1.5s ease-out, transform 1.5s ease-out"})),V=t(()=>({})),j=t(()=>({})),q=t(()=>m.value?{opacity:0,transition:"opacity 800ms ease-out"}:h.value?{opacity:1,transition:"opacity 600ms ease-in"}:{opacity:0,transition:"opacity 600ms ease-in"}),A=t(()=>m.value?{backgroundImage:`url(${Y})`,backgroundSize:"cover",backgroundPosition:"center",transition:"background-image 0.3s ease-in-out"}:{backgroundImage:`url(${g})`,backgroundSize:"cover",backgroundPosition:"center"}),C=async()=>{n.value!==null&&(clearTimeout(n.value),n.value=null),l.value!==null&&(clearTimeout(l.value),l.value=null),m.value=!0;const u=800;await new Promise(r=>setTimeout(r,u)),p.push({name:"question"})};R(()=>{setTimeout(()=>{h.value=!0},50),c.value&&s.value&&(s.value.load(),s.value.play().catch(L=>{console.error("影片播放失敗:",L)})),c.value||setTimeout(()=>{x.value=!0},1e3),c.value||setTimeout(()=>{v.value=!0},2e3);const u=7e3,r=800;n.value=window.setTimeout(()=>{m.value=!0,l.value=window.setTimeout(()=>{p.push({name:"question"})},r)},u-r)}),N(()=>{n.value!==null&&(clearTimeout(n.value),n.value=null),l.value!==null&&(clearTimeout(l.value),l.value=null)});const D=()=>{$.value=!0},F=()=>{s.value&&(y.value||(y.value=!0),s.value.currentTime=1,s.value.play().catch(u=>{console.error("影片播放失敗:",u)}))};return(u,r)=>(d(),f("main",{class:"relative min-h-screen w-full cursor-pointer font-sans",onClick:C},[a("div",{class:"background-base-layer",style:o(A.value)},null,4),a("div",{class:"fade-wrapper",style:o(q.value)},[a("div",{class:"relative mx-auto flex min-h-[100vh] w-full max-w-[480px] flex-col items-center justify-center px-0 text-center",style:o(z.value)},[c.value?(d(),f("div",{key:0,class:"video-container relative w-full max-w-[480px]",style:o(V.value)},[a("video",{ref_key:"videoElement",ref:s,src:i(J),class:"video-main",style:o(j.value),autoplay:"",muted:"",playsinline:"",preload:"auto",onEnded:F,onLoadeddata:D},null,44,ee)],4)):(d(),f("div",te,[a("img",{src:i(k),alt:"過場2",class:"h-auto w-full object-contain",style:o(O.value)},null,12,ae),a("img",{src:i(K),alt:"smog",class:W(["pointer-events-none absolute h-auto object-contain",{"smog-float":x.value}]),style:o(B.value)},null,14,oe),a("img",{src:i(Q),alt:"transition text",class:"pointer-events-none absolute h-auto object-contain",style:o(U.value)},null,12,se)])),a("img",{src:i(X),alt:"警告標語",class:"absolute bottom-0 left-0 z-10 w-full"},null,8,ne)],4)],4)]))}}),de=Z(le,[["__scopeId","data-v-fea55d27"]]);export{de as default};
