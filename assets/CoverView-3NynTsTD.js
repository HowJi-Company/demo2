import{d as $,b as d,e as A,p as m,w as I,T as H,q as J,k as y,i as o,j as v,l as k,r as s,c as W,u as K,s as Q,o as X,a as Z,f as n,F as ee,g as te,n as oe}from"./index-DK4RB-FT.js";import{_ as se,c as ne,w as ae,f as le,m as ie,a as re,b as ue,d as ce,e as de,l as M}from"./遊戲開始前動畫-KqZKOWLH.js";import{M as me}from"./MetallicButton-DOQaeiG9.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{w as pe}from"./warning_footer-D9FTkEpB.js";const fe={key:0,class:"fixed inset-0 z-[999] flex items-center justify-center"},he={class:"relative z-10 w-[70%] max-w-[350px]"},ye=["src"],we=["src"],be=["src"],xe=$({__name:"ModalImage",props:{visible:{type:Boolean},src:{},yesButton:{},noButton:{},yesPos:{},noPos:{},buttonWidth:{},buttonMaxWidth:{},onYes:{type:Function},onNo:{type:Function},onClose:{type:Function}},emits:["update:visible"],setup(B,{emit:w}){const e=B,r=w,b=()=>{var t;(t=e.onYes)==null||t.call(e),r("update:visible",!1)},p=()=>{var t;(t=e.onNo)==null||t.call(e),r("update:visible",!1)},x=()=>{var t;(t=e.onClose)==null||t.call(e),r("update:visible",!1)};return(t,P)=>(d(),A(J,{to:"body"},[m(H,{name:"fade"},{default:I(()=>[e.visible?(d(),y("div",fe,[o("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-[2px]",onClick:x}),o("div",he,[o("img",{src:e.src,alt:"modal",class:"w-full"},null,8,ye),e.yesButton&&e.yesPos?(d(),y("img",{key:0,src:e.yesButton,alt:"yes",class:"absolute cursor-pointer",style:v({left:e.yesPos.x+"%",top:e.yesPos.y+"%",transform:"translate(-50%, -50%)",width:e.buttonWidth||"auto",maxWidth:e.buttonMaxWidth||"35%",height:"auto"}),onClick:b},null,12,we)):k("",!0),e.noButton&&e.noPos?(d(),y("img",{key:1,src:e.noButton,alt:"no",class:"absolute cursor-pointer",style:v({left:e.noPos.x+"%",top:e.noPos.y+"%",transform:"translate(-50%, -50%)",width:e.buttonWidth||"auto",maxWidth:e.buttonMaxWidth||"35%",height:"auto"}),onClick:p},null,12,be)):k("",!0)])])):k("",!0)]),_:1})]))}}),z=ve(xe,[["__scopeId","data-v-49950921"]]),_e=["src"],ge=["src"],Te=["src"],ke={class:"flex justify-center"},Be=["src"],N=4,Ne=$({__name:"CoverView",setup(B){const w=te(),e=s(null),r=()=>{e.value&&(e.value.currentTime=N,e.value.play())},b=()=>{e.value&&e.value.duration&&e.value.currentTime>=e.value.duration-.1&&(e.value.currentTime=N,e.value.play())},p=M,x=W(()=>({backgroundImage:`url(${p})`,backgroundSize:"cover",backgroundPosition:"center"})),t=[M],P=K();Q(P);const S=s(!1),_=s(!1),R=s(12),g=s(typeof window<"u"?window.innerWidth:480),T={mobile:200,desktop:240,breakpoint:375},U=W(()=>g.value<=T.breakpoint?T.mobile:T.desktop),u=s(!1),f=s(!1),Y=s({x:25,y:72}),F=s({x:75,y:72}),V=s({x:50,y:72}),E=()=>{u.value=!0},j=()=>{u.value=!1,q()},L=()=>{u.value=!1,f.value=!0},D=()=>{f.value=!1};let h=null;const C=()=>{g.value=window.innerWidth},G=a=>new Promise((l,i)=>{const c=new Image;c.onload=()=>l(),c.onerror=i,c.src=a}),O=async()=>{try{await Promise.all(t.map(G))}catch(a){console.warn("圖片預載入失敗，繼續執行",a)}},q=()=>{try{w.push({name:"transition1"})}catch(a){console.error("跳轉失敗",a)}};return X(async()=>{g.value=window.innerWidth,window.addEventListener("resize",C);const a=Date.now(),l=5e3;await O(),setTimeout(()=>{S.value=!0},300),setTimeout(()=>{_.value=!0},300);const i=Date.now()-a,c=Math.max(0,l-i);h=setTimeout(()=>{},c)}),Z(()=>{h&&(clearTimeout(h),h=null),window.removeEventListener("resize",C)}),(a,l)=>(d(),y(ee,null,[m(se,{src:n(p),darken:.2,edgeRatio:.01,containerClass:"min-h-screen w-full overflow-hidden font-sans",as:"main"},{default:I(()=>[o("div",{class:"relative mx-auto flex min-h-[100vh] w-full max-w-[480px] items-center justify-center px-0 pt-4 text-center",style:v(x.value)},[o("div",{class:"relative inline-block",style:v({"--top-gap":`${R.value}px`})},[o("img",{src:n(ne),alt:"cover top text",class:"hidden"},null,8,_e),o("img",{src:n(ae),alt:"window2",class:"invisible",style:{maxWidth:"75%",margin:"0 auto"}},null,8,ge),o("video",{ref_key:"videoRef",ref:e,src:n(le),autoplay:"",muted:"",playsinline:"",class:"pointer-events-none absolute left-1/2 top-1/2 z-0 -translate-x-1/2 -translate-y-[51%]",style:{width:"100%",height:"auto"},onEnded:r,onTimeupdate:b},null,40,Te)],4),o("div",{class:oe(["absolute left-1/2 z-20 w-full -translate-x-1/2 transition-opacity duration-[2000ms]",{"opacity-0":!_.value,"opacity-100":_.value}]),style:v({top:`calc(50% + ${U.value}px)`})},[o("div",ke,[m(me,{text:"進入微醺之夜",starLeftOffset:"-16px",starRightOffset:"-16px",width:"auto",height:"42px",onClick:E,showStars:!0,glow:!0})])],6),o("img",{src:n(pe),alt:"警告標語",class:"absolute bottom-0 left-0 z-10 w-full"},null,8,Be)],4)]),_:1},8,["src"]),m(z,{visible:u.value,"onUpdate:visible":l[0]||(l[0]=i=>u.value=i),src:n(ie),yesButton:n(re),noButton:n(ue),yesPos:Y.value,noPos:F.value,buttonMaxWidth:"60%",onYes:j,onNo:L},null,8,["visible","src","yesButton","noButton","yesPos","noPos"]),m(z,{visible:f.value,"onUpdate:visible":l[1]||(l[1]=i=>f.value=i),src:n(ce),yesButton:n(de),yesPos:V.value,buttonMaxWidth:"60%",onYes:D},null,8,["visible","src","yesButton","yesPos"])],64))}});export{Ne as default};
